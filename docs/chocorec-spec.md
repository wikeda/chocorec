# ちょこRec 仕様書

## 1. 概要
- アプリ名: ちょこRec
- 目的: トレーニングの回数/セット/重さを記録し、週次・月次で可視化する
- 形態: Androidネイティブアプリ（オフライン専用）

## 2. 対象プラットフォーム
- Android 10 以上
- 開発スタック: Kotlin + Jetpack Compose
- ローカルDB: Room（SQLite）

## 3. 前提・制約
- ログイン不要
- 端末内保存のみ
- バックアップ/同期なし（将来有料機能の想定）
- 通知リマインドなし
- テンプレ機能なし
- クイック入力の追加なし（現行の前回値自動補完を維持）

## 4. 機能要件

### 4.1 トレーニング記録
- 入力項目
  - 日付（過去7日まで）
  - 種目
  - 回数
  - セット数
  - 重さ（任意）
- 記録時に以下を自動補完
  - 同一種目の前回値（回数/セット/重さ）
- 記録保存時の負荷計算
  - 負荷 = 回数 * セット数 * 重さ
  - 重さ未入力の場合は重さ=1として計算

### 4.2 履歴管理
- 日付ごとにグループ表示
- 選択した記録の編集/削除
- 編集UIはボトムシート

### 4.3 グラフ表示
- 週次/月次の切り替えタブ
- 積層横棒グラフ
- 期間に応じて以下を表示
  - 合計負荷
  - 記録回数
- 月次は日数に応じて縦スクロール対応

### 4.4 種目マスタ管理
- 種目の追加/編集/論理削除
- 並び替え（上下移動）
- 種目名変更時は過去記録の種目名も一括更新
- 最大50種目
- 種目ごとの色指定

### 4.5 CSV出力
- 端末内にCSV保存（Storage Access Framework）
- CSVフォーマット（UTF-8 BOM付き）
  - 日付, 種目, 回数, セット数, 重さ(kg), 作成日時, 更新日時
- ファイル名: `ChocoRec_export_YYYYMMDD.csv`

### 4.6 ホーム画面ウィジェット
- サイズ: 中
- 表示内容
  - 今週の合計負荷
  - 今週の記録回数
- 操作
  - タップで「記録追加」画面（メイン画面のフォーム）を開く
- ウィジェット内で入力/プルダウンは提供しない

## 5. 画面構成

### 5.1 メイン画面
- 週次/月次タブ
- グラフ（積層横棒）
- 合計負荷/記録回数のサマリ
- ボトム固定の記録フォーム（2行レイアウト）

### 5.2 履歴画面
- 日付グループの一覧
- ラジオ選択 -> 編集ボトムシート
- CSV保存ボタン

### 5.3 種目管理画面
- 種目一覧
- 追加/編集/削除（論理削除）
- 並び替え

## 6. データモデル（Room）

### 6.1 training_records
- id: String (UUID)
- date: String (YYYY-MM-DD)
- exercise_name: String
- count: Int
- sets: Int
- weight: Float? (null許容)
- created_at: String (ISO)
- updated_at: String (ISO)

### 6.2 exercises
- id: String (UUID)
- name: String
- color: String (#RRGGBB)
- order: Int
- is_active: Boolean
- created_at: String (ISO)
- updated_at: String (ISO)

## 7. 非機能要件
- オフライン動作
- 端末内のみで完結
- 主要操作は片手操作を意識したシンプルUI

## 8. 対象外
- ログイン/クラウド同期
- バックアップ/復元
- 通知リマインド
- テンプレ
- ウィジェット内入力
